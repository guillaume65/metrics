# Read metrics from MQTT topic(s)
[[inputs.mqtt_consumer]]
   servers = ["mqtt://mqtt:1883"]
   qos = 2
   topics = [
     "events/central_heating/otmonitor/boilerwatertemperature",
     "events/central_heating/otmonitor/returnwatertemperature",
     "events/central_heating/otmonitor/controlsetpoint",
     "events/central_heating/otmonitor/roomtemperature",
     "events/central_heating/otmonitor/modulation",
     "events/central_heating/otmonitor/chsetpoint",
     "events/central_heating/otmonitor/setpoint",
   ]
name_override = "OTV"
data_format = "value"
data_type = "float"
 
# Read metrics from MQTT topic(s)
[[inputs.mqtt_consumer]]
   servers = ["mqtt://mqtt:1883"]
   qos = 2
   topics = [
     "events/central_heating/otmonitor/flame",
     "events/central_heating/otmonitor/hotwater",
     "events/central_heating/otmonitor/centralheating",
     "events/central_heating/otmonitor/thermostat",
     "events/central_heating/otmonitor/chenable",
     "events/central_heating/otmonitor/dhwenable",
     "events/central_heating/otmonitor/fault",
   ]
name_override = "OTB"
data_format = "value"
data_type = "boolean"
 
# Read metrics from MQTT topic(s)
[[inputs.mqtt_consumer]]
   servers = ["mqtt://mqtt:1883"]
   qos = 2
   topics = [
     "events/central_heating/otmonitor/flame",
     "events/central_heating/otmonitor/hotwater",
     "events/central_heating/otmonitor/centralheating",
     "events/central_heating/otmonitor/thermostat",
     "events/central_heating/otmonitor/chenable",
     "events/central_heating/otmonitor/dhwenable",
     "events/central_heating/otmonitor/fault",
   ]
name_override = "OTI"
data_format = "value"
data_type = "integer"

# The message topic will be stored in a tag specified by this value.  If set
# to the empty string no topic tag will be created.
topic_tag = "otgw_topic"

# Data format to consume.
# Each data format has its own unique set of configuration options, read
# more about them here:
# https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md
  data_format = "json"

# Configuration for sending metrics to InfluxDB 2.0

[[outputs.influxdb_v2]]
# The URLs of the InfluxDB cluster nodes.
#
# Multiple URLs can be specified for a single cluster, only ONE of the
# urls will be written to each interval.
# urls exp: http://127.0.0.1:8086
urls = ["influxdb:8086"]

# Token for authentication.
token = "buE9JsZIo4s46z2tvGG0qeRTOwTzB6RhJOjKuSJ0uPXy1rS-wU-jLyn0IWpOlDMs5SfWc4gt5LnDVH8o14FFRA=="

# Organization is the name of the organization you wish to write to; must exist.
organization = "verheij.local"

# Destination bucket to write into.
bucket = "otgw"